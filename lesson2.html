<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2과: From Problems to Solutions - 문장 순서 배열 연습</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Malgun Gothic', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .back-btn {
            position: absolute;
            left: 30px;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255,255,255,0.2);
            color: white;
            border: 2px solid rgba(255,255,255,0.3);
            padding: 10px 20px;
            border-radius: 25px;
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .header {
            background: linear-gradient(45deg, #FF9500, #FF5722);
            color: white;
            padding: 30px 20px;
            text-align: center;
            position: relative;
        }

        .exercise-container {
            padding: 30px 20px;
        }

        .exercise-select select {
            padding: 12px 20px;
            font-size: 16px;
            border: 2px solid #ddd;
            border-radius: 8px;
            background: white;
            cursor: pointer;
            min-width: 300px;
            max-width: 100%;
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            .back-btn {
                left: 15px;
                padding: 8px 15px;
                font-size: 14px;
            }

            .header {
                padding: 25px 15px;
            }

            .header h1 {
                font-size: 1.8em;
            }

            .header p {
                font-size: 1em;
            }

            .exercise-container {
                padding: 20px 15px;
            }

            .exercise-select select {
                min-width: 250px;
                font-size: 14px;
                padding: 10px 15px;
            }

            .btn {
                padding: 10px 20px;
                font-size: 14px;
                margin: 5px;
            }

            .sentence-item {
                padding: 12px;
                font-size: 14px;
            }

            .drop-zone {
                padding: 15px;
                min-height: 60px;
                font-size: 14px;
            }
        }

        @media (max-width: 480px) {
            .back-btn {
                left: 10px;
                padding: 6px 12px;
                font-size: 12px;
            }

            .header {
                padding: 20px 10px;
            }

            .header h1 {
                font-size: 1.6em;
            }

            .exercise-container {
                padding: 15px 10px;
            }

            .exercise-select select {
                min-width: 200px;
                font-size: 13px;
            }

            .btn {
                padding: 8px 15px;
                font-size: 13px;
            }

            .sentence-item {
                padding: 10px;
                font-size: 13px;
            }
        }

        .header h1 {
            font-size: 2.2em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .exercise-info {
            background: #f8f9fa;
            border-left: 5px solid #FF9500;
            padding: 20px;
            margin-bottom: 30px;
            border-radius: 5px;
        }

        .exercise-select {
            margin-bottom: 30px;
            text-align: center;
        }

        .controls {
            text-align: center;
            margin: 20px 0;
        }

        .btn {
            background: linear-gradient(45deg, #FF9500, #FF5722);
            color: white;
            border: none;
            padding: 12px 25px;
            margin: 0 10px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255, 149, 0, 0.3);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 149, 0, 0.4);
        }

        .btn:disabled {
            background: #6c757d;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .exercise-area {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-top: 30px;
        }

        @media (max-width: 768px) {
            .exercise-area {
                grid-template-columns: 1fr;
            }
        }

        .scrambled-sentences, .ordered-sentences {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            min-height: 400px;
        }

        .scrambled-sentences h3, .ordered-sentences h3 {
            color: #FF9500;
            margin-bottom: 15px;
            font-size: 1.3em;
            border-bottom: 2px solid #FF9500;
            padding-bottom: 5px;
        }

        .sentence-item {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            cursor: pointer;
            transition: all 0.3s ease;
            user-select: none;
            position: relative;
            line-height: 1.5;
            font-family: 'Times New Roman', serif;
        }

        .sentence-item:hover {
            border-color: #FF9500;
            box-shadow: 0 4px 12px rgba(255, 149, 0, 0.2);
            transform: translateY(-2px);
        }

        .sentence-item:active {
            transform: scale(0.98);
        }

        .sentence-item.selected {
            border-color: #007bff;
            background-color: rgba(0, 123, 255, 0.1);
            box-shadow: 0 0 15px rgba(0, 123, 255, 0.3);
        }

        .drop-zone {
            border: 2px dashed #ddd;
            border-radius: 8px;
            padding: 20px;
            margin: 5px 0;
            min-height: 70px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            transition: all 0.3s ease;
            font-style: italic;
            cursor: pointer;
        }

        .drop-zone:hover {
            border-color: #FF9500;
            background-color: rgba(255, 149, 0, 0.1);
            color: #FF9500;
        }

        .drop-zone.highlight {
            border-color: #007bff;
            background-color: rgba(0, 123, 255, 0.1);
            color: #007bff;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(0, 123, 255, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(0, 123, 255, 0); }
            100% { box-shadow: 0 0 0 0 rgba(0, 123, 255, 0); }
        }

        .score-display {
            text-align: center;
            margin: 20px 0;
            padding: 15px;
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            border-radius: 10px;
            font-size: 1.2em;
            font-weight: bold;
            color: #333;
        }

        .feedback {
            text-align: center;
            margin: 20px 0;
            padding: 15px;
            border-radius: 10px;
            font-weight: bold;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .feedback.correct {
            background: linear-gradient(45deg, #28a745, #20c997);
            color: white;
            opacity: 1;
        }

        .feedback.incorrect {
            background: linear-gradient(45deg, #dc3545, #fd7e14);
            color: white;
            opacity: 1;
        }

        .correct-sentence {
            border-color: #28a745 !important;
            background-color: rgba(40, 167, 69, 0.1);
        }

        .incorrect-sentence {
            border-color: #dc3545 !important;
            background-color: rgba(220, 53, 69, 0.1);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <a href="main.html" class="back-btn">← 과 선택</a>
            <h1>🏙️ 2과: From Problems to Solutions</h1>
            <p>Bringing New Life to Old Cities - 영어 문장들을 올바른 순서로 배열해보세요!</p>
        </div>

        <div class="exercise-container">
            <div class="exercise-info">
                <h3>📚 연습 방법</h3>
                <p>1. 아래에서 연습할 문단을 선택하세요<br>
                2. 왼쪽의 문장을 클릭해서 선택한 후, 오른쪽의 원하는 위치를 클릭하세요<br>
                3. 잘못 배치한 문장은 클릭해서 다시 왼쪽으로 돌려보낼 수 있습니다<br>
                4. '정답 확인' 버튼을 눌러 결과를 확인하세요</p>
            </div>

            <div class="exercise-select">
                <select id="exerciseSelect">
                    <option value="">연습할 문단을 선택하세요</option>
                    <option value="introduction">Introduction (도시 재생 개념) - 4문장</option>
                    <option value="wallisblok_background">Wallisblok Background (배경 설명) - 7문장</option>
                    <option value="wallisblok_solution">Wallisblok Solution (1유로 아파트 해결책) - 8문장</option>
                    <option value="de_ceuvel_background">De Ceuvel Background (조선소 지역 문제) - 4문장</option>
                    <option value="de_ceuvel_solution">De Ceuvel Solution (친환경 기술 놀이터) - 7문장</option>
                    <option value="conclusion">Conclusion (성공 요인) - 4문장</option>
                </select>
            </div>

            <div class="controls">
                <button class="btn" id="shuffleBtn" disabled>다시 섞기</button>
                <button class="btn" id="checkBtn" disabled>정답 확인</button>
                <button class="btn" id="resetBtn" disabled>초기화</button>
            </div>

            <div class="score-display" id="scoreDisplay" style="display: none;">
                점수: <span id="score">0</span>/100
            </div>

            <div class="feedback" id="feedback"></div>

            <div class="exercise-area" id="exerciseArea" style="display: none;">
                <div class="scrambled-sentences">
                    <h3>🔀 Scrambled Sentences</h3>
                    <div id="scrambledContainer"></div>
                </div>

                <div class="ordered-sentences">
                    <h3>✅ Correct Order</h3>
                    <div id="orderedContainer"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const exercises = {
            introduction: [
                "As cities age, neighborhoods can become old and lifeless, which may cause citizens to move away.",
                "When this happens, a collaboration between the local government and citizens is an effective way to revitalize the area.",
                "Let's take a look at two projects in the Netherlands to find out what successful urban revitalization looks like.",
                "Both projects show how creative thinking can transform abandoned areas into thriving communities."
            ],
            wallisblok_background: [
                "Rotterdam, the second largest city in the Netherlands, is known for its modern architecture and busy port.",
                "By taking a ten-minute tram ride west from the city center, however, you can get to a more peaceful environment.",
                "Instead of crowded streets, you will see neighbors chatting in front of a modern residential structure and families spending time in its garden.",
                "The structure is a large apartment building called Wallisblok.",
                "Not that long ago, this area was very different, and nobody thought it could become a place where families would want to live.",
                "Yet that is exactly what happened.",
                "For years, the neighborhood was known for its high crime rates."
            ],
            wallisblok_solution: [
                "Many apartments in Wallisblok were abandoned and then taken over by people who lived in them illegally.",
                "At first, the local government thought that the best solution was simply to tear the building down and build a new one in its place.",
                "However, having a limited budget, the government was unable to do so and had to come up with a new plan.",
                "The plan was to sell the empty apartments for one euro each.",
                "The only condition was that people who bought these apartments needed to renovate them.",
                "Although the new residents would have to pay for these renovations, the government's plan soon attracted many applicants.",
                "In the end, 42 new families moved into Wallisblok.",
                "Today, Wallisblok is one of the most desirable places to live in Rotterdam."
            ],
            de_ceuvel_background: [
                "In the early 20th century, there was an area in the northern part of Amsterdam that was full of shipyards and factories.",
                "Over time, the shipyards closed down, and the work once done at the factories was moved abroad.",
                "As a result, the area was left abandoned and polluted for years.",
                "Wanting to do something to improve the area, the city purchased an abandoned shipyard called De Ceuvel."
            ],
            de_ceuvel_solution: [
                "However, city officials did not know what to do with it.",
                "So they turned to the public for help by asking for plans that would achieve two primary goals.",
                "First, the plan had to include a method to clean up the land and turn it into a sustainable development.",
                "Second, it had to suggest a way to transform the site into a creative workspace.",
                "In the end, an architectural company submitted an innovative plan and was awarded a ten-year lease on the former shipyard.",
                "Since it was impossible to build foundations on the oily mud of the polluted land, the architects decided to use old, abandoned boats instead.",
                "Today, De Ceuvel is now known as one of the most active playgrounds for innovative green technology in all of Amsterdam."
            ],
            conclusion: [
                "These two examples of urban revitalization in the Netherlands required much more than a budget and a plan.",
                "Innovative thinking, creativity, community spirit, and cooperation were all vital to their success.",
                "These projects are great sources of inspiration for other cities that are looking to bring new life to abandoned areas.",
                "They prove that with the right approach, even the most challenging urban problems can be transformed into opportunities."
            ]
        };

        let currentExercise = [];
        let correctOrder = [];
        let userOrder = [];
        let selectedSentence = null;

        const exerciseSelect = document.getElementById('exerciseSelect');
        const shuffleBtn = document.getElementById('shuffleBtn');
        const checkBtn = document.getElementById('checkBtn');
        const resetBtn = document.getElementById('resetBtn');
        const exerciseArea = document.getElementById('exerciseArea');
        const scrambledContainer = document.getElementById('scrambledContainer');
        const orderedContainer = document.getElementById('orderedContainer');
        const scoreDisplay = document.getElementById('scoreDisplay');
        const scoreElement = document.getElementById('score');
        const feedback = document.getElementById('feedback');

        exerciseSelect.addEventListener('change', function() {
            const selectedExercise = this.value;
            if (selectedExercise) {
                loadExercise(selectedExercise);
            }
        });

        shuffleBtn.addEventListener('click', shuffleSentences);
        checkBtn.addEventListener('click', checkAnswer);
        resetBtn.addEventListener('click', resetExercise);

        function loadExercise(exerciseKey) {
            currentExercise = [...exercises[exerciseKey]];
            correctOrder = [...currentExercise];
            userOrder = [];
            selectedSentence = null;

            shuffleSentences();
            exerciseArea.style.display = 'block';
            shuffleBtn.disabled = false;
            resetBtn.disabled = false;
            scoreDisplay.style.display = 'none';
            hideFeedback();
        }

        function shuffleSentences() {
            const shuffled = [...currentExercise];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }

            displayScrambledSentences(shuffled);
            createDropZones();
            checkBtn.disabled = true;
            userOrder = [];
            selectedSentence = null;
        }

        function displayScrambledSentences(sentences) {
            scrambledContainer.innerHTML = '';
            sentences.forEach((sentence, index) => {
                const sentenceDiv = document.createElement('div');
                sentenceDiv.className = 'sentence-item';
                sentenceDiv.textContent = sentence;
                sentenceDiv.dataset.sentence = sentence;

                sentenceDiv.addEventListener('click', function() {
                    selectSentence(this);
                });

                scrambledContainer.appendChild(sentenceDiv);
            });
        }

        function selectSentence(element) {
            document.querySelectorAll('.sentence-item.selected').forEach(item => {
                item.classList.remove('selected');
            });
            document.querySelectorAll('.drop-zone.highlight').forEach(zone => {
                zone.classList.remove('highlight');
            });

            element.classList.add('selected');
            selectedSentence = element;

            document.querySelectorAll('.drop-zone').forEach(zone => {
                zone.classList.add('highlight');
            });

            showFeedback('선택된 문장을 배치할 위치를 클릭하세요!', 'correct');
        }

        function createDropZones() {
            orderedContainer.innerHTML = '';
            for (let i = 0; i < currentExercise.length; i++) {
                const dropZone = document.createElement('div');
                dropZone.className = 'drop-zone';
                dropZone.textContent = `문장 ${i + 1}을 여기에 배치하세요`;
                dropZone.dataset.position = i;

                dropZone.addEventListener('click', function() {
                    handleDropZoneClick(this);
                });

                orderedContainer.appendChild(dropZone);
            }
        }

        function handleDropZoneClick(dropZone) {
            if (!selectedSentence) {
                showFeedback('먼저 왼쪽에서 문장을 선택하세요!', 'incorrect');
                return;
            }

            const sentence = selectedSentence.dataset.sentence;
            const position = parseInt(dropZone.dataset.position);

            const sentenceDiv = document.createElement('div');
            sentenceDiv.className = 'sentence-item';
            sentenceDiv.textContent = sentence;
            sentenceDiv.dataset.sentence = sentence;
            sentenceDiv.dataset.position = position;

            sentenceDiv.addEventListener('click', function() {
                returnSentence(this);
            });

            dropZone.parentNode.replaceChild(sentenceDiv, dropZone);
            selectedSentence.remove();
            selectedSentence = null;

            document.querySelectorAll('.sentence-item.selected').forEach(item => {
                item.classList.remove('selected');
            });
            document.querySelectorAll('.drop-zone.highlight').forEach(zone => {
                zone.classList.remove('highlight');
            });

            updateUserOrder();
            hideFeedback();
        }

        function returnSentence(sentenceElement) {
            const position = parseInt(sentenceElement.dataset.position);
            const sentence = sentenceElement.dataset.sentence;

            const dropZone = document.createElement('div');
            dropZone.className = 'drop-zone';
            dropZone.textContent = `문장 ${position + 1}을 여기에 배치하세요`;
            dropZone.dataset.position = position;

            dropZone.addEventListener('click', function() {
                handleDropZoneClick(this);
            });

            sentenceElement.parentNode.replaceChild(dropZone, sentenceElement);

            const newSentenceDiv = document.createElement('div');
            newSentenceDiv.className = 'sentence-item';
            newSentenceDiv.textContent = sentence;
            newSentenceDiv.dataset.sentence = sentence;

            newSentenceDiv.addEventListener('click', function() {
                selectSentence(this);
            });

            scrambledContainer.appendChild(newSentenceDiv);

            selectedSentence = null;
            document.querySelectorAll('.sentence-item.selected').forEach(item => {
                item.classList.remove('selected');
            });
            document.querySelectorAll('.drop-zone.highlight').forEach(zone => {
                zone.classList.remove('highlight');
            });

            updateUserOrder();
        }

        function updateUserOrder() {
            userOrder = [];
            const placedSentences = orderedContainer.querySelectorAll('.sentence-item');
            placedSentences.forEach(sentence => {
                const position = parseInt(sentence.dataset.position);
                userOrder[position] = sentence.dataset.sentence;
            });

            const hasEmptySlots = userOrder.includes(undefined) || userOrder.length !== currentExercise.length;
            checkBtn.disabled = hasEmptySlots;
        }

        function checkAnswer() {
            let correct = 0;
            const placedSentences = orderedContainer.querySelectorAll('.sentence-item');
            
            placedSentences.forEach((sentence, index) => {
                sentence.classList.remove('correct-sentence', 'incorrect-sentence');
                const position = parseInt(sentence.dataset.position);
                const userSentence = sentence.dataset.sentence;
                const correctSentence = correctOrder[position];
                
                if (userSentence === correctSentence) {
                    sentence.classList.add('correct-sentence');
                    correct++;
                } else {
                    sentence.classList.add('incorrect-sentence');
                }
            });

            const score = Math.round((correct / currentExercise.length) * 100);
            scoreElement.textContent = score;
            scoreDisplay.style.display = 'block';

            if (score === 100) {
                showFeedback('🎉 완벽합니다! 모든 문장을 올바르게 배열했습니다!', 'correct');
            } else if (score >= 70) {
                showFeedback(`👍 잘했습니다! ${correct}/${currentExercise.length}개 정답입니다.`, 'correct');
            } else {
                showFeedback(`💪 다시 한번 시도해보세요! ${correct}/${currentExercise.length}개 정답입니다.`, 'incorrect');
            }
        }

        function resetExercise() {
            const selectedExercise = exerciseSelect.value;
            if (selectedExercise) {
                loadExercise(selectedExercise);
            }
            hideFeedback();
        }

        function showFeedback(message, type) {
            feedback.textContent = message;
            feedback.className = `feedback ${type}`;
        }

        function hideFeedback() {
            feedback.className = 'feedback';
        }
    </script>
</body>
</html>